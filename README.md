# Group Cache

go语言实现的分布式缓存项目

[TOC]



## 缓存淘汰

### 常见的缓存淘汰策略

常见的缓存淘汰策略有以下几种：

1. 先进先出 (FIFO)：缓存中最先进入的数据被最先淘汰。
2. 最近最少使用 (LRU)：缓存中最近最少使用的数据被最先淘汰。
3. 最少使用 (LFU)：缓存中最少使用的数据被最先淘汰。
4. 随机 (RAND)：随机选择一个缓存块进行淘汰。
5. 最近未使用 (NRU)：将缓存块标记为“已使用”或“未使用”，并在淘汰时优先淘汰未使用的缓存块。
6. 时间轮 (Clock)：类似于NRU策略，但是将缓存块放在一个时间轮上，并按照轮子旋转的顺序进行淘汰。
7. 热度 (Heat)：缓存中数据的热度被用于决定哪些缓存块被淘汰，热度高的数据被优先保留。

#### 先进先出 (FIFO)

优点：

- 实现简单，易于理解和部署。
- 对于缓存数据没有任何的优先级考虑，公平性较高。

缺点：

- 不考虑数据的访问频率，容易导致缓存中存储了很多很少使用的数据，而淘汰了一些常用的数据，缓存效率不高。
- FIFO无法应对数据访问模式变化的情况，不能适应高频数据和突发流量。

#### 最近最少使用 (LRU)

最近最少使用（LRU）算法是一种常见的缓存淘汰策略，它的基本思想是在缓存空间不足时，优先淘汰最近最少使用的缓存数据。

具体来说，LRU算法会在缓存中记录每个缓存数据最近一次被访问的时间戳。当缓存空间不足时，LRU算法会找到最近最少使用的数据，也就是最长时间没有被访问过的数据，并将其淘汰，以腾出空间存储新的数据。

LRU算法的实现可以采用链表和哈希表的结合来实现。具体地，可以使用双向链表记录缓存数据的访问顺序，每次访问缓存数据时，将其移动到链表头部，以表示该数据是最近访问过的。当缓存空间不足时，可以从链表尾部淘汰最近最少使用的数据。

LRU算法的优点包括：

1. 能够最大限度地利用缓存空间，减少缓存不命中率，提高缓存命中率。
2. 算法实现相对简单，容易理解和实现。
3. 在实际应用中广泛使用，许多缓存实现都支持LRU算法。

而LRU算法的缺点是：

1. 对于访问模式较为复杂的应用程序，LRU算法可能会出现“缓存失效预测不准”的情况，即某些数据虽然很少访问，但在未来可能会频繁访问，而被错误地淘汰。
2. 需要维护缓存数据的访问时间戳，会占用一定的内存空间和计算资源。

总的来说，LRU算法是一种较为简单和高效的缓存淘汰策略，在实际应用中具有广泛的应用和良好的效果。

#### 最少使用 (LFU)

优点：

- 比LRU更准确地考虑了缓存数据的访问频率，淘汰最少使用的数据，可以更好地利用缓存空间。
- 在访问频率较低的情况下可以起到一定的防止数据被淘汰的作用。

缺点：

- 实现较为复杂，需要维护每个数据的使用次数，对于缓存中的数据更新频率较高时，可能导致算法性能下降。
- 对于访问频率变化较快的数据，淘汰策略可能不太准确。

### 最近最少使用(LRU)的实现

group cache使用**最近最少使用(LRU)**作为缓存的淘汰策略



## 单机并发缓存

## HTTP服务端

## 一致性哈希

### 一致性哈希算法

一致性哈希算法（Consistent Hashing）是一种用于解决分布式系统中缓存、负载均衡等问题的算法。它的基本思想是将数据和服务器都映射到同一个哈希环上，并保证数据尽可能均匀地分布在哈希环上，同时将服务器映射到哈希环上的位置也尽可能均匀分布。这样，在需要查找缓存数据时，只需根据数据的哈希值在哈希环上查找到对应的位置，然后按顺时针方向找到最近的服务器即可。

具体来说，一致性哈希算法的实现步骤如下：

1. 将所有的缓存服务器和数据都映射到一个哈希环上，可以使用哈希函数对缓存数据和服务器进行哈希，得到一个哈希值，并将其映射到哈希环上的一个位置。
2. 在哈希环上查找缓存数据对应的位置，并按照顺时针方向查找到最近的服务器位置。
3. 当添加或删除一个服务器时，只需重新计算该服务器在哈希环上的位置，并将其负责的缓存数据迁移到该服务器上。

一致性哈希算法的优点包括：

1. 在添加或删除缓存服务器时，只需要重新计算和迁移部分缓存数据，而不需要全局重新分配，因此具有较好的可扩展性和灵活性。
2. 能够很好地解决节点故障导致的缓存失效问题，因为只需将该节点负责的缓存数据迁移到其他节点上即可。
3. 由于哈希环的使用，能够保证缓存数据的分布相对均匀，缓存命中率较高。

一致性哈希算法的缺点是：

1. 可能存在哈希值分布不均匀的问题，导致某些节点负载过重或过轻。
2. 需要维护一份节点列表，并保证节点列表的同步性，增加了实现的复杂度。

总的来说，一致性哈希算法是一种常用的分布式缓存和负载均衡的解决方案，它具有良好的可扩展性、灵活性和可靠性，是一种比较成熟和有效的算法。

### 解决节点负载不均衡的问题

## 分布式节点
